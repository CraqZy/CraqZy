def get_number(prompt: str) -> float:
    while True:
        try:
            number = float(input(prompt))
            print("You entered:", number)
            return number
        except ValueError:
            print("Invalid input. Please try again.")

def sum(number1: float, number2: float) -> float:
    return number1 + number2

def diff(number1: float, number2: float) -> float:
    return number1 - number2

def prod(number1: float, number2: float) -> float:
    return number1 * number2

def quot(number1: float, number2: float) -> float | str:
    '''
    This makes division possible. Returns an error message if dividing by zero.
    '''
    return number1 / number2 if number2 != 0 else "That doesn't work: Division by zero"

def power(number1: float, number2: float) -> float:
    return number1 ** number2

operations = {
    "+": sum,
    "-": diff,
    "*": prod,
    "/": quot,
    "^": power
}

def get_operation() -> str:
    valid_operations = list(operations.keys())
    while True:
        operation = input(f"What do you want to calculate {valid_operations}: ")
        if operation in valid_operations:
            print(f"You chose: {operation}")
            return operation
        else:
            print(f"Invalid operation. Please enter one of {valid_operations}")

def run_calculator():
    while True:
        number1 = get_number("Please enter the first number: ")
        number2 = get_number("Please enter another number: ")
        operation = get_operation()

        result = operations[operation](number1, number2)

        # Handle string result (e.g. division by zero)
        if isinstance(result, str):
            print(result)
        else:
            print(f"Result: {result}")

        answer = input("Do you want to calculate more? (yes/no): ").strip().lower()
        if answer == "no":
            break

run_calculator()
